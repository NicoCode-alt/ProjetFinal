{% extends 'base.html.twig' %}

{% block title %}Zikrit{% endblock %}

{% block body %}


  <div class="card text-center" style="width: 30%;">
     <img src="{{ album.images[0].url }}" alt="Cover">
    <div class="card-body">
      {% for artist in album.artists %}
          <p>Artiste : <strong>{{ artist.name }}</strong></p>
          <p>Album : <strong> {{ album.name }}</strong></p>
      {% endfor %}


      <h5 class="card-author">Auteur de la critique : {{ critic.user.username }}</h5>
      <p class="card-text">Commentaire :<br> {{ critic.content }}</p>
      <p class="card-text">Ajouté le {{ critic.createdAt | date("d/m/Y à H:i") }}</p>

      {# Debut partie rating #}
      <p>Note : {{ critic.rating }} / 10 
        {% if critic.rating == 0 %}
            {% for i in 1..10 %}
                <i class="far fa-star"></i>
            {% endfor %}
            {% elseif critic.rating == 10 %}
                {% for i in 1..10 %}
                    <i class="fas fa-star"></i>
                {% endfor %}
            {% else %}
                {# Boucle Etoiles pleines #}
                {% for i in 1..critic.rating %}
                    <i class="fas fa-star"></i>
                {% endfor %}
                {# Boucle Etoiles vides #}
                {% for i in 1..10-critic.rating %}
                    <i class="far fa-star"></i>
                {% endfor %}
        {% endif %}
        </p>
      {# Fin partie rating #}

      <a href="{{ path('critics_index') }}" class="btn btn-secondary">Retour à l'accueil</a>
<iframe src="https://www.facebook.com/plugins/share_button.php?href=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fplugins%2F&layout=button_count&size=small&width=113&height=20&appId" width="113" height="20" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowfullscreen="true" allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"></iframe>
    </div>
  </div>

  <div class="border">

    {% if critic.commentaries|length == 0 %}
    <hr>
    <p><strong>Il n'y a pas de commentaires</strong></p>
    {% else %}
    {% for commentaire in critic.commentaries %}
    <hr>
        <br>
        <h2 class="commentaire_titre text-center text-white fw-bold shadow p-3 mb-5 bg-body rounded w-75" >Section commentaire</h2>
        <h3>Auteur du commentaire : {{ commentaire.user.username }}</h3>
        <p class="fs-5">Son commentaire : {{ commentaire.content }}</p>
        <div class="like_dislike">
            {% include 'partials/like_commentary.html.twig' with {"like" : commentaire.getLikeBy(app.user)} %}
        </div>


        <hr>
        {% if app.user == commentaire.user.username %}
        <a href="{{ path('delete_commentary', {id:commentaire.id}) }}" class="btn btn-danger">Supprimer le commentaire</a>
        {% endif %}
      {% endfor %}
    {% endif %}
</div>

<div class="border">

  {% if app.user %}
    {{form_start(formulaire)}}

      {{ form_row(formulaire.content) }}

      <button type="submit" class="btn btn-success">Envoyer</button>

    {{form_end(formulaire)}}

  {% else %}
    <p>Veuillez vous connecter pour laisser un commentaire</p>
    <a href="{{ path('login') }}" class="btn btn-success">Connexion</a>
  {% endif %}
</div>


{% endblock %}


{% block javascripts %}
    <script src="{{ asset('assets/javaScript/like.js') }}"></script>
{% endblock %}

